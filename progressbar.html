<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <progress class="progress" id="file-progress" value="0"><span>0</span>%</progress>
    <script>
      function setProgressMaxValue(e) {
             var pBar = document.getElementById("file-progress");

             if (e.lengthComputable) {
               pBar.max = e.total;
             }
           }

           function updateFileProgress(e) {
             var pBar = document.getElementById("file-progress");

             if (e.lengthComputable) {
               pBar.value = e.loaded;
             }
           }

           function uploadFile(file) {
             var xhr = new XMLHttpRequest(),
               fileInput = document.getElementById("class-roster-file"),
               pBar = document.getElementById("file-progress"),
               fileSizeLimit = 1024; // In MB
             if (xhr.upload) {
               // Check if file is less than x MB
               if (file.size <= fileSizeLimit * 1024 * 1024) {
                 // Progress bar
                 pBar.style.display = "inline";
                 xhr.upload.addEventListener("loadstart", setProgressMaxValue, false);
                 xhr.upload.addEventListener("progress", updateFileProgress, false);

                 // File received / failed
                 xhr.onreadystatechange = function (e) {
                   if (xhr.readyState == 4) {
                     // Everything is good!
                     // progress.className = (xhr.status == 200 ? "success" : "failure");
                     // document.location.reload(true);
                   }
                 };
    </script>
  </body>
</html>
