<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="ì–¼êµ´ ì‚¬ì§„ì„ AIë¡œ ë¶„ì„í•˜ì—¬ ì •ì¹˜ ì„±í–¥ì„ ì˜ˆì¸¡í•˜ëŠ” ì‚¬ì´íŠ¸ì´ë‹¤. ë‚´ ì–¼êµ´ì´ ì§„ë³´ì˜ ìƒì¸ì§€ ë³´ìˆ˜ì˜ ìƒì¸ì§€ ì¬ë¯¸ë¡œ í™•ì¸ í•  ìˆ˜ ìˆë‹¤."
    />
    <meta property="og:title" content="ì •ì¹˜ ê´€ìƒ í…ŒìŠ¤íŠ¸" />
    <meta
      property="og:description"
      content="ì–¼êµ´ ì‚¬ì§„ì„ AIë¡œ ë¶„ì„í•˜ì—¬ ì •ì¹˜ ì„±í–¥ì„ ì˜ˆì¸¡í•˜ëŠ” ì‚¬ì´íŠ¸. ë‚´ ì–¼êµ´ì´ ì§„ë³´ì˜ ìƒì¸ì§€ ë³´ìˆ˜ì˜ ìƒì¸ì§€ í™•ì¸í•´ ë³´ì„¸ìš”."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://github.com/jbyjby/koreanpoititionface/blob/main/img/mainog.png?raw=true" />
    <meta property="og:image" content="https://github.com/jbyjby/koreanpoititionface/blob/main/img/mainog.png?raw=true" />
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7270568015111547"
      crossorigin="anonymous"
    ></script>
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="stylesheet" href="/style.css" type="text/css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <!-- ì¹´ì¹´ì˜¤í†¡ -->

    <script
      src="https://t1.kakaocdn.net/kakao_js_sdk/2.6.0/kakao.min.js"
      integrity="sha384-6MFdIr0zOira1CHQkedUqJVql0YtcZA1P0nbPrQYJXVJZUkTk/oX4U9GhUIs3/z8"
      crossorigin="anonymous"
    ></script>
    <script src="js/share.js"></script>
    <script>
      // Kakao SDK ì´ˆê¸°í™”
      Kakao.init("38f29a9f6e62558e30e1318a0713e849");
      console.log("ì¹´ì¹´ì˜¤í†¡ ì´ˆê¸°í™” ìƒíƒœ:", Kakao.isInitialized());
    </script>
    <meta name="naver-site-verification" content="be89642fd3fd004e3631b85ceb6815e6fcc70a44" />
    <title>ì •ì¹˜ê´€ìƒí…ŒìŠ¤íŠ¸</title>
  </head>
  <body>
    <div class="title">
      <h4 style="font-size: 2vw">ë‚´ê°€ <span class="title-blue">ì§„ë³´</span>ì˜ ìƒì¸ê°€? <span class="title-red">ë³´ìˆ˜</span>ì˜ ìƒì¸ê°€?</h4>
      <div class="main-title">
        <img class="title-img" src="/img/title.jpg" alt="íˆ¬í‘œìŠ¤íƒ¬í”„" />
        <h1>ì •ì¹˜ ê´€ìƒ í…ŒìŠ¤íŠ¸</h1>
      </div>
    </div>

    <div>
      <div class="politician">
        <h3 style="font-size: 130%">ëŒ€í•œë¯¼êµ­ ëŒ€í‘œ ì •ì¹˜ì¸ í‰ê·  ì–¼êµ´</h3>
        <div class="politician-script-detail0">í•œêµ­ì˜ ëŒ€í‘œ ì •ì¹˜ì¸ ì–¼êµ´ì„ ì •ì¹˜ ì„±í–¥ë³„ë¡œ í•©ì„±í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.</div>

        <div class="politicianImg">
          <img class="politicianImg-detail" id="politicianImg0" src="/img/left1.jpg" alt="ë¯¼ì£¼ ë‚¨ì" />
          <img class="politicianImg-detail" id="politicianImg1" src="/img/left2.jpg" alt="ë¯¼ì£¼ ì—¬ì" />
          <img class="politicianImg-detail" id="politicianImg2" src="/img/right1.jpg" alt="êµ­í˜ ë‚¨ì " />
          <img class="politicianImg-detail" id="politicianImg3" src="/img/right2.jpg" alt="êµ­í˜ ì—¬ì" />
        </div>
        <div class="politician-script">
          <div class="politician-script-detail">ì§„ë³´ ì„±í–¥ ì •ì¹˜ì¸ í‰ê·  ì–¼êµ´</div>
          <div class="politician-script-detail">ë³´ìˆ˜ ì„±í–¥ ì •ì¹˜ì¸ í‰ê·  ì–¼êµ´</div>
        </div>
      </div>
    </div>
    <ins class="kakao_ad_area" style="display: none" data-ad-unit="DAN-KcPf2zAWcygqSgGo" data-ad-width="320" data-ad-height="100"></ins>
    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>

    <h2 style="text-align: center; font-size: 5vw">ë‚´ê°€ ì§„ë³´ì˜ ìƒì¼ê¹Œ? ë³´ìˆ˜ì˜ ìƒì¼ê¹Œ?</h2>
    <p style="text-align: center; font-size: 58%">â¬‡ï¸â¬‡ï¸ê´€ìƒì— ë”°ë¼ ì •ì¹˜ ì„±í–¥ì„ ì•Œ ìˆ˜ ìˆì„ê¹Œìš”? ì¬ë¯¸ë¡œë§Œ í•´ì£¼ì„¸ìš”. í…ŒìŠ¤íŠ¸í•˜ê¸°ğŸ¥°â¬‡ï¸â¬‡ï¸</p>

    <div class="toggle">
      <p style="font-size: 80%; padding-top: 0.8rem; padding-right: 0.8rem">ì—¬ì</p>
      <input type="checkbox" id="gender" />
      <label for="gender">
        <span class="knob"><i></i></span>
      </label>
      <p style="font-size: 80%; padding-top: 0.8rem; padding-left: 0.8rem">ë‚¨ì</p>
    </div>

    <div class="img-container">
      <img class="sideImg" src="/img/í•œë™í›ˆ.jpg" alt="í•œë™í›ˆ" />
      <div class="uploadFile">
        <form id="file-upload-form" class="uploader">
          <input id="file-upload" type="file" name="fileUpload" accept="image/*" />
          <label for="file-upload" id="file-drag" style="padding: 10% 0">
            <img id="file-image" src="#" alt="Preview" class="hidden" />
            <div class="resultTitle"></div>

            <div class="start" id="start">
              <div><i class="fa fa-download" aria-hidden="true" style="font-size: 8vw"></i></div>
              <div style="font-size: 59%; width: 100%">
                AIë¡œ ë¶„ì„í•˜ëŠ”ë° 5ì´ˆì •ë„ ê±¸ë ¤ìš”.<br />ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.ğŸ˜…<br />ì‚¬ì§„ì€ ë¶„ì„ í›„ ë°”ë¡œ ì‚­ì œë©ë‹ˆë‹¤.
              </div>
              <div><span id="file-upload-btn" class="btn btn-primary">ì‚¬ì§„ ì—…ë¡œë“œ</span></div>

              <div id="notimage" class="hidden" style="font-size: 60%">ì‚¬ì§„ íŒŒì¼(.jpg, .png ë“±)ì„ ì—…ë¡œë“œ í•´ì£¼ì„¸ìš”.</div>
            </div>

            <div id="file-image"></div>
            <div id="response" class="hidden">
              <!-- <div id="messages"></div> -->
              <!-- <progress class="progress" id="file-progress" value="0"><span>0</span>%</progress> -->
              <div>
                <button class="btn btn-primary d-none" id="spinner" type="button" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  ë¶„ì„í•˜ëŠ” ì¤‘...
                </button>
              </div>
            </div>
          </label>
        </form>
      </div>
      <img class="sideImg" src="/img/ì´ì¬ëª….jpg" alt="ì´ì¬ëª…" />
    </div>
    <!-- ê³µìœ  ê²°ê³¼ ë“¤ì–´ì˜¬ ìë¦¬ -->
    <div class="result-box">
      <div class="resultDesc"></div>
      <div id="label-container"></div>
      <div class="resultPeople"></div>
      <div class="last-button">
        <a id="shareButton" class="btn-gradient yellow small" sytle="text-align: center"> ê³µìœ í•˜ê¸°</a>
        <a href="#" class="btn-gradient blue small" onclick="reset()" sytle="text-align: center;" onclick="reset()">ë‹¤ì‹œí•˜ê¸°</a>
      </div>
    </div>

    <ins class="kakao_ad_area" style="display: none" data-ad-unit="DAN-hcDZppdeHRFYCKL6" data-ad-width="320" data-ad-height="50"></ins>
    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>
    <div id="disqus_thread"></div>
    <div class="footer">Â© JBY, 2024. All Rights Reserved.<br />ë¬¸ì˜: jby8775@gmail.com</div>

    <!-- ëŒ“ê¸€ì°½ -->
    <script>
      (function () {
        // DON'T EDIT BELOW THIS LINE
        var d = document,
          s = d.createElement("script");
        s.src = "https://jby-2.disqus.com/embed.js";
        s.setAttribute("data-timestamp", +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    <!-- í‹°ì³ë¸” ë¨¸ì‹  -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

    <script>
      const reset = () => {
        location.reload();
      };

      function resetPage() {
        document.getElementById("file-image").src = "#";
        document.querySelector(".result-box").style.display = "none";
      }
      document.querySelector("button[type='button']").addEventListener("click", resetPage);
    </script>
    <script type="text/javascript">
      // More API functions here:
      // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image
      // the link to your model provided by Teachable Machine export panel

      const URLman = "https://teachablemachine.withgoogle.com/models/JCPzCRcMo/";
      const URLwoman = "https://teachablemachine.withgoogle.com/models/ryFGsFriI/";
      let model, labelContainer, maxPredictions;

      // í† ê¸€ ë¶€ë¶„
      let gender = "2";
      document.querySelector("#gender").addEventListener("change", function () {
        gender = this.checked ? "1" : "2"; // í† ê¸€ ê°’ì— ë”°ë¼ ì„±ë³„ ì„¤ì •
        console.log(gender);
      });

      async function init1() {
        const modelURL = gender === "1" ? URLman + "model.json" : URLwoman + "model.json";
        const metadataURL = gender === "1" ? URLman + "metadata.json" : URLwoman + "metadata.json";

        // ëª¨ë¸ ë° ë©”íƒ€ë°ì´í„° ë¡œë“œ
        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();
        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();

        // ë”ì— ì—˜ë¦¬ë¨¼íŠ¸ ì¶”ê°€ divê°€ 2ê°œ ìƒê¹€
        labelContainer = document.getElementById("label-container");
        for (let i = 0; i < maxPredictions; i++) {
          // and class labels
          labelContainer.appendChild(document.createElement("div"));
        }
      }

      // intit1ê³¼ ë™ì‹œì— ì˜ˆì¸¡í•˜ê¸°
      async function predict() {
        let uploadImg = document.getElementById("file-image"); //ì—…ë¡œë“œí•œ ì´ë¯¸ì§€
        const prediction = await model.predict(uploadImg, false);
        prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
        console.log(prediction);
        console.log(prediction[0].className);
        let result, shareButton;
        switch (prediction[0].className) {
          case "ë³´ìˆ˜ë‚¨":
            result = data.ë³´ìˆ˜ë‚¨;
            shareButton = data.ë³´ìˆ˜ë‚¨.className;
            break;
          case "ì§„ë³´ë‚¨":
            result = data.ì§„ë³´ë‚¨;
            shareButton = data.ì§„ë³´ë‚¨.className;
            break;
          case "ë³´ìˆ˜ì—¬":
            result = data.ë³´ìˆ˜ì—¬;
            shareButton = data.ë³´ìˆ˜ì—¬.className;
            break;
          case "ì§„ë³´ì—¬":
            result = data.ì§„ë³´ì—¬;
            shareButton = data.ì§„ë³´ì—¬.className;
            break;
          default:
            result = data.ëª°ë¼;
        }
        //ê³µìœ í•˜ê¸° ë²„íŠ¼
        //       function updateShareButton(className) {
        //   let shareButton = document.getElementById("shareButton");
        //   switch (className) {
        //     case "ë³´ìˆ˜ë‚¨":
        //       shareButton.href = "javascript:shareMessage0()";
        //       break;
        //     case "ì§„ë³´ë‚¨":
        //       shareButton.href = "javascript:shareMessage1()";
        //       break;
        //     case "ë³´ìˆ˜ì—¬":
        //       shareButton.href = "javascript:shareMessage2()";
        //       break;
        //     case "ì§„ë³´ì—¬":
        //       shareButton.href = "javascript:shareMessage3()";
        //       break;
        //     default:
        //       shareButton.href = "#"; // ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
        //   }
        // }
        // let className = prediction[0].className;
        //   updateShareButton(className);

        //ê²°ê³¼ ì œëª©ê³¼ ì„¤ëª…
        document.querySelector(".resultTitle").innerHTML = result.title;
        document.querySelector(".resultDesc").innerHTML = result.description;
        document.querySelector(".resultPeople").innerHTML = `ê°™ì€ ì„±í–¥ ì •ì¹˜ì¸: ${result.people}`;
        const resultBox = document.querySelector(".result-box");
        resultBox.style.display = "block";
        document.getElementById("shareButton").href = shareButton;
        //í”„ë¡œê·¸ë˜ìŠ¤ë°”
        for (let i = 0; i < maxPredictions; i++) {
          let predictionName;
          predictionName =
            prediction[i].className === "ë³´ìˆ˜ë‚¨" || prediction[i].className === "ë³´ìˆ˜ì—¬"
              ? "ë³´ìˆ˜"
              : prediction[i].className === "ì§„ë³´ë‚¨" || prediction[i].className === "ì§„ë³´ì—¬"
              ? "ì§„ë³´"
              : prediction[i].className;

          labelContainer.childNodes[
            i
          ].innerHTML = `<div class="prediction">${predictionName} <div class="progress-bar" style="background-color:#dedede">
          <div class="progress" id ="progress${[i]}" style="height: 100%; border-radius:10px; width: ${
            Math.round(prediction[i].probability.toFixed(2) * 99 + 1) + "%"
          };"><span style="position: absolute">${Math.round(prediction[i].probability.toFixed(2) * 100) + "%"}</span></div></div>
      </div>`;
        }

        const totalNum = Math.round(prediction[i].probability.toFixed(2) * 100 + 1); // ì „ì²´ %
        const bar = document.querySelector(".progress"); // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ìš”ì†Œ ì„ íƒ

        let t = 0;
        const barAnimation = setInterval(() => {
          bar.style.width = t + "%"; // ë„ˆë¹„ ì„¤ì •
          t++; // ë„ˆë¹„ ì¦ê°€
          if (t >= totalNum) clearInterval(barAnimation); // ìµœëŒ€ ë„ˆë¹„ì— ë„ë‹¬í•˜ë©´ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì§€
        }, 10);
      }

      // ì‚¬ì§„ ì—…ë¡œë“œ
      //
      function ekUpload() {
        function Init() {
          console.log("Upload Initialised");

          var fileSelect = document.getElementById("file-upload"),
            fileDrag = document.getElementById("file-drag");

          fileSelect.addEventListener("change", fileSelectHandler, false);

          // Is XHR2 available?
          var xhr = new XMLHttpRequest();
          if (xhr.upload) {
            // File Drop
            fileDrag.addEventListener("dragover", fileDragHover, false);
            fileDrag.addEventListener("dragleave", fileDragHover, false);
            fileDrag.addEventListener("drop", fileSelectHandler, false);
          }
        }

        function fileDragHover(e) {
          var fileDrag = document.getElementById("file-drag");

          e.stopPropagation();
          e.preventDefault();

          fileDrag.className = e.type === "dragover" ? "hover" : "modal-body file-upload";
        }

        function fileSelectHandler(e) {
          // Fetch FileList object
          var files = e.target.files || e.dataTransfer.files;

          // Cancel event and hover styling
          fileDragHover(e);

          // Process all File objects
          for (var i = 0, f; (f = files[i]); i++) {
            parseFile(f);
            uploadFile(f);
          }
        }

        // Output
        function output(msg) {
          // Response
          var m = document.getElementById("messages");
          //   m.innerHTML = msg;
        }

        function parseFile(file) {
          document.querySelector("#spinner").className = "btn btn-primary";
          console.log(file.name);
          output("<strong>" + encodeURI(file.name) + "</strong>");

          // ì´ë¯¸ì§€ íŒŒì¼ ì—¬ë¶€ í™•ì¸
          var isGood = /\.(?=gif|jpg|png|jpeg)/gi.test(file.name);
          if (isGood) {
            var reader = new FileReader(); // íŒŒì¼ì„ ì½ê¸° ìœ„í•œ FileReader ê°ì²´ ìƒì„±
            reader.onload = function (e) {
              // ì½ê¸° ë™ì‘ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
              document.getElementById("start").classList.add("hidden");
              document.getElementById("response").classList.remove("hidden");
              document.getElementById("notimage").classList.add("hidden");
              // Thumbnail Preview
              var preview = document.getElementById("file-image");
              preview.classList.remove("hidden");
              preview.src = e.target.result; // ì½ì–´ë“¤ì¸ íŒŒì¼ì˜ URLì„ ì´ë¯¸ì§€ íƒœê·¸ì˜ src ì†ì„±ì— ì§€ì •í•˜ì—¬ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
              init1().then(() => {
                console.log("ëª¨ë¸ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ");
                document.querySelector("#spinner").className = "btn btn-primary d-none";
                predict();
              });
            };
            reader.readAsDataURL(file); // íŒŒì¼ì„ ì½ì–´ Data URLë¡œ ë³€í™˜
          } else {
            // ì´ë¯¸ì§€ íŒŒì¼ì´ ì•„ë‹Œ ê²½ìš°
            document.getElementById("file-image").classList.add("hidden");
            document.getElementById("notimage").classList.remove("hidden");
            document.getElementById("start").classList.remove("hidden");
            document.getElementById("response").classList.add("hidden");
            document.getElementById("file-upload-form").reset();
          }
        }

        function setProgressMaxValue(e) {
          var pBar = document.getElementById("file-progress");

          if (e.lengthComputable) {
            pBar.max = e.total;
          }
        }

        function updateFileProgress(e) {
          var pBar = document.getElementById("file-progress");

          if (e.lengthComputable) {
            pBar.value = e.loaded;
          }
        }

        function uploadFile(file) {
          var xhr = new XMLHttpRequest(),
            fileInput = document.getElementById("class-roster-file"),
            pBar = document.getElementById("file-progress"),
            fileSizeLimit = 1024; // In MB
          if (xhr.upload) {
            // Check if file is less than x MB
            if (file.size <= fileSizeLimit * 1024 * 1024) {
              // Progress bar
              pBar.style.display = "inline";
              xhr.upload.addEventListener("loadstart", setProgressMaxValue, false);
              xhr.upload.addEventListener("progress", updateFileProgress, false);

              // File received / failed
              xhr.onreadystatechange = function (e) {
                if (xhr.readyState == 4) {
                  // Everything is good!
                  // progress.className = (xhr.status == 200 ? "success" : "failure");
                  // document.location.reload(true);
                }
              };

              // Start upload
              xhr.open("POST", document.getElementById("file-upload-form").action, true);
              xhr.setRequestHeader("X-File-Name", file.name);
              xhr.setRequestHeader("X-File-Size", file.size);
              xhr.setRequestHeader("Content-Type", "multipart/form-data");
              xhr.send(file);
            } else {
              output("Please upload a smaller file (< " + fileSizeLimit + " MB).");
            }
          }
        }

        // Check for the various File API support.
        if (window.File && window.FileList && window.FileReader) {
          Init();
        } else {
          document.getElementById("file-drag").style.display = "none";
        }
      }
      ekUpload();
    </script>
    <script src="js/share.js/" charset="UTF-8"></script>

    <script src="js/data.js" charset="UTF-8"></script>
  </body>
</html>
